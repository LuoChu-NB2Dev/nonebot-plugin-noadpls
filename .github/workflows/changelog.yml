# 此工作流已整合到 release.yml 中，不再使用
# 保留作为参考

name: Update Changelog (Deprecated)

# 已禁用此工作流，功能已整合到 release.yml
on:
  workflow_dispatch: # 仅手动触发
  # release:
  #   types: [published]

jobs:
  changelog:
    runs-on: ubuntu-latest
    permissions:
      contents: write
      pull-requests: write
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Update changelog
        uses: rhysd/changelog-from-release/action@v3
        with:
          file: CHANGELOG.md
          github_token: ${{ secrets.GITHUB_TOKEN }}
          args: -l 2 -d=true # 包含草稿发布
          header: |
            # Changelog

            本文档记录了项目的所有重要变更。

            格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
            并且本项目遵循 [语义化版本](https://semver.org/lang/zh-CN/)。
